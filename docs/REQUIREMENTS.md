## 1. 프로젝트 개요

**프로젝트명**: RAIM 방문자 체크인 시스템

**작성일**: 2026-01-28

**대상 사용자**: 건물/시설 방문자, 관리자

**관련 문서**: [기능 명세서](https://www.notion.so/FSD-2f61b986cb978059927bf7d0619128e2?pvs=21) | [시스템 아키텍처](https://www.notion.so/2f61b986cb9780b9b26bc5251fa6a5ac?pvs=21) | [유지보수 가이드](https://www.notion.so/2f61b986cb9780c5a898fe360c73d1cf?pvs=21)| [설치 및 배포 가이드](https://www.notion.so/2f61b986cb9780d1ac08f65d2acb7a61?pvs=21)|

---

## 2. 비즈니스 요구사항

### 2.1 목표

- 방문자의 정보를 웹기반으로 자동 수집 및 관리
- 수집된 데이터를 자동으로 백업하여 장기 보관
- 시스템 비용 제로 (무료 서비스 기반)
- 최소 5년 이상 무지하지 않고 자동 운영

### 2.2 주요 문제 해결

- 수동 방문자 기록 작성의 번거로움
- 데이터 손실 위험
- 서버 비용 부담

---

## 3. 기능 요구사항

### 3.1 필수 기능

| ID | 기능 | 설명 |
| --- | --- | --- |
| F001 | 웹 기반 입력 인터페이스 | 방문자가 웹 브라우저에서 접근 가능한 체크인 화면 |
| F002 | 카메라 기반 인식 | 웹캠을 통한 얼굴 인식으로 성별/연령대 자동 감지 |
| F003 | 수동 입력 | 카메라 오류 시 수동으로 정보 입력 가능 |
| F004 | 관리자 잠금 화면 | 관람실 선택 및 비밀번호 입력으로 관리자 인증 |
| F005 | 관리자 대시보드 | localStorage 기반 일일 통계 및 설정 관리 |
| F006 | 자동 백업 | 설정된 주기마다 Firestore → Google Sheets 백업 |
| F007 | 자동 정리 | 백업 완료 후 Firestore 데이터 자동 삭제 |
| F008 | 오류 알림 | 백업 실패 시 관리자 이메일 알림 |
| F009 | 배포 | Vercel을 통한 웹 배포 (Git 연동) |

### 3.2 선택 기능 (구현 완료)

| ID | 기능 | 설명 |
| --- | --- | --- |
| O001 | 방문자 목록 조회 | 기간별 필터링 및 상세 조회 |
| O002 | 데이터 필터링 | 날짜/시간/위치별 데이터 조회 |
| O003 | 엑셀 내보내기 | 통계 데이터 엑셀 형식 다운로드 |
| O004 | 한/영 다국어 지원 | 한국어/영문 언어 선택 기능 |
| O005 | 알림 설정 | 방문자 수 임계값 초과 시 알림 |

---

## 4. 비기능 요구사항

### 4.1 성능

- 페이지 로딩 시간: 2초 이내
- 데이터 입력 응답시간: 1초 이내
- 동시 사용자: 10명 이상
- 일일 처리량: 1,500명+ (간간히 폭증하는 경우 기준)

### 4.2 안정성

- 시스템 가용성: 99% 이상
- 데이터 손실 위험: 0% (백업 후 삭제 원칙)
- 백업 성공률: 99.5% 이상
- 타임아웃 대응: 부분 백업 모드로 전환

### 4.3 확장성

- 일일 방문자 3,000명까지 무료 티어로 처리 가능
- 트리거 간격 조정으로 트래픽 대응 (1/3/6/12시간 선택)
- 구조 변경 없이 기능 추가 가능

### 4.4 보안

- Firebase Firestore 인증: 서비스 계정 기반
- 데이터 전송: HTTPS 암호화
- 개인정보: 집계 데이터만 장기 보관 (개별 기록은 자동 삭제)
- 접근 제어: 관리자 암호 보호

### 4.5 사용성

- 비개발자도 설정/운영 가능
- 설정 시간: 30분 이내
- 유지보수: 월 1회, 10분 이내

### 4.6 호환성

- 브라우저: Chrome, Safari, Firefox 최신 버전
- 운영체제: Windows, macOS, Linux
- 모바일: 반응형 웹 디자인 (스마트폰 접근 가능)

---

## 5. 시스템 요구사항

### 5.1 기술 스택

| 계층 | 기술 | 이유 |
| --- | --- | --- |
| Frontend | React + Vite | 빠른 성능, 실시간 UI |
| Face Recognition | face-api.js | 브라우저 기반 얼굴 인식 |
| Backend | Firebase Firestore | 무료 실시간 데이터베이스 |
| Automation | Google Apps Script | 무료 자동화 스케줄러 |
| Backup | Google Sheets | 무료 영구 데이터 보관 |
| Hosting | Vercel | Git 기반 자동 배포 (무료) |

### 5.2 외부 의존성

- Firebase 프로젝트 (무료)
- Google 계정
- Google Apps Script OAuth2 라이브러리
- face-api.js 모델 파일

### 5.3 인프라 비용

- 총 운영비: 0원/월
- 무료 한도 사용률: 40% 미만 (3시간 트리거 기준, 1/3/6/12시간 선택 가능)

---

## 6. 데이터 요구사항

### 6.1 저장 데이터

```
방문자 기록:
- timestamp: 날짜/시간
- gender: 성별 (남성/여성)
- ageGroup: 연령대 (10대, 20대, ...)
- source: 입력 방식 (카메라/수동)
- location: 위치/출입구

```

### 6.2 데이터 보관 정책

- localStorage: 자정까지 (일일 통계 임시 저장)
- Firestore: 설정 간격마다 백업 후 삭제 (1/3/6/12시간 중 선택, 3시간 권장)
- Google Sheets: 무제한 (집계 데이터)
- 개인 기록: 자동 삭제 (집계 후)

### 6.3 데이터 용량

- 일일 데이터: 약 1,000개 문서 (1,000명 기준)
- 월간 데이터: 약 30,000개 문서
- 연간 Google Sheets: 약 365만 셀 (1,000만 셀 제한의 36%)

---

## 7. 배포 요구사항

### 7.1 배포 환경

- Frontend: Vercel (Git 연동 배포)
- Backend: Firebase (클라우드)
- 배포 방식: 자동 (GitHub push 시)

### 7.2 배포 주기

- 수정사항 발생 시 GitHub에 push → Vercel 자동 배포
- 배포 시간: 1~2분 (빌드 및 배포)
- 계획된 업데이트: 수시 (매 커밋마다 배포)

### 7.3 가동성 검증

- 자동 테스트: Vercel 빌드 단계에서 실행
- Preview URL: pull request 시마다 자동 생성
- 프로덕션 배포: GitHub main 브랜치 merge 시 자동 배포

---

## 8. 유지보수 요구사항

### 8.1 모니터링

- 주간: Google Sheets 데이터 확인
- 월간: Firebase 사용량 모니터링
- 분기별: 서비스 계정 키 보안 갱신

### 8.2 로깅

- Apps Script 실행 로그: 자동 생성
- 오류 추적: 이메일 알림
- 데이터 보고: 월간 요약

### 8.3 지원 대상

- 비개발자 운영자: 설정/모니터링 지원
- 개발자: 기술 지원 및 개선

---

## 9. 제약사항 및 위험요소

### 9.1 제약사항

- Firebase 무료 티어: 1일 50,000회 읽기, 20,000회 쓰기/삭제
- Apps Script: 1회 6분 제한, 1일 90분 제한
- Google Sheets: 1,000만 셀 저장량
- 페이지 크기 제한: 한 번에 500 문서만 조회

### 9.2 확장 시나리오

- 일일 3,000명+ 지속적 유입: 유료 tier 검토 필요
- 동시 사용자 50명+: 인프라 최적화 필요
- 2년 이상 운영: 데이터 아카이빙 전략 수립

---

## 10. 체크리스트

### 10.1 개발 완료 기준

- [x]  React 웹 애플리케이션 기본 구조
- [x]  Face-api.js 얼굴 인식 기능
- [x]  Firebase Firestore 데이터 저장
- [x]  Google Apps Script 자동화 스크립트
- [x]  Google Sheets 백업 기능
- [x]  Vercel 배포 설정 및 자동화
- [x]  오류 처리 및 타임아웃 복구

### 10.2 배포 전 확인

- [ ]  성능 최적화 (API 효율 40% 개선)
- [ ]  안정성 검증 (1,000+ 문서 처리 테스트)
- [ ]  문서화 (SETUP_GUIDE.md, 본 명세서)
- [ ]  비용 검증 (무료 티어 내 운영 확인)

---